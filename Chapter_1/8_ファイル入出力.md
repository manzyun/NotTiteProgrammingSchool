## ファイル入出力

### 概要
Pythonでのテキスト（アスキーデータ）ファイルの取り扱いについてざっくりと伝える。

### 今までのプログラムの悩ましい話
実はここで皆さんに衝撃のお話があります。  
実は今まで学んできたプログラミングの知識では、プログラムの実行結果はプログラムが終了すると消えてしまいます。

これがどれだけ深刻かというと……

* せっかく鍛え上げたRPGのキャラクターのセーブができません
* ハイスコアが残りません
* 商品の在庫状況が記録できません
* 将来評価されるかもしれない傑作のポエムが残せません
* 楽しかった夏の思い出も忘れられてしまいます

一番最初に言いましたね、  
「コンビューターはその変数にどんな重要な情報があっても、命令があればすぐにそれを忘れて上書きしてしまう」  
って。

しかし、「仕事が終わったら全て忘れ去られる」なんて嫌だ！　ということはたくさんありますので、コンピューターにちゃんとノートやメモを取ってもらって記憶を記録にしてもらいます。

### コンピューターにノートを取らせる
Pythonに限らず、多くのプログラミング言語では「机の上にノートを開く」動作が必要となります。  
Pythonの場合は次のようになります。

```py
file = open('note.txt', 'w')
```

解説していきましょう。open()メソッドはfileオブジェクトを返します。fileオブジェクトを経由することで、実際のファイル（今回は「note.txt」の読み書きを行います。

openメソッドの引数では「どこにあるファイルに注目するか」と「どんな読み書きをするのか」を指定します。  
「どこにあるファイルに注目するか」ですが、今回は「note.txt」というファイルに注目します。「どんな読み書きをするのか」については「w」という文字が指定されています。

「どんな読み書きをするのか」についてですが、以下の表のように指定します。

|やりたいこと|引数に指定する文字列|
|-----------|-----------------|
|読み込みのみしたい|r|
|ファイルに書かれている内容を全て消してから書き込みたい|w|
|ファイルに書かれている内容の一番下に追記したい|a|
|ファイルが存在する場合はエラーを返し、存在しない場合に書き込みたい|x|

ところで「note.txt」はどこにあるのでしょう。

実はw,a,xを指定した場合はファイルが新しくプログラムのファイルがある場所と同じところに作られます。  
また、rの場合はプログラムのファイルがあるところにファイルがあるか確認し、なければエラーを返します。  
では場所を指定する場合はどう書くのでしょう。絶対パス、もしくは相対パスを指定します。

```
TODO:絶対パスと相対パスについて書く？（別ページでも可）
```

さて、開いたノートの内容を把握するには読まなければなりません。当然の事を申しているようですが、コンピューターはそれをちゃんと命令しないといけません。  
先ほどのコードの後に次のように記述します。

```py
data = file.read()  # 改行記号で区切る必要がない場合はこちら

data = file.readlines() # 改行記号で区切られた文字列リストを使いたい場合はこちら
```

このようにしてコンピューターに読まれたノートの内容を、次は書き出してもらいます。もしかしたらお分かりかもしれませんね。

```py
print(data)
```

読み取った文字列に関してはもちろん加工が可能です。例えば「行頭にアスタリスク（*）を付けたい」という場合は

```py
# read() メソッドを使った場合
for line in data.split('n'):
    line = '* ' + line
print data

# readlines()メソッドを使った場合
for line in data:
    line = '* ' + line
print data
```

また、加工した文字列を保存したいと思います。その時は以下のコードを記入します。

```py
file.write(data)
```

そしてちゃんとノートを閉じて収納しないと机の上からノートやメモの紙が落ちてしまうので、その指示もします。

```py
file.close()
```

一連の流れをまとめると以下のようになります。（read()メソッドを使った場合です。）

```py
flie = open('note.txt', 'w')
data = file.read()

for line in data.split('n')
    line = '* ' + line
print data

file.write(data)
file.close()
```

更に詳しい情報は[7. 入力と出力 — Python 3.3.5 ドキュメント](http://docs.python.jp/3.3/tutorial/inputoutput.html#reading-and-writing-files)をご覧ください。

### 実は人間に解読できる、あんなファイルこんなファイル。

### まとめ
今回は次の事を頭の隅に残していただけると幸いです。

* プリントする結果をフォーマットを指定して表示することができる。
* ファイルを読み書きする際はopen()メソッドで開き、使わなくなったらclose()メソッドで閉じる。
* 実はテキスト（アスキーデータ）で構成されているファイルがいくつもあり、かつそれらを便利に使うクラスがPythonにはある。


### 余談

### 参考資料
* [7. 入力と出力 — Python 3.3.5 ドキュメント](http://docs.python.jp/3/tutorial/inputoutput.html)
